!function(e){"function"==typeof define&&define.amd?define(e):"object"==typeof exports?module.exports=e():window.pullRefresh=e()}(function(){function e(e){function n(e){return"-"+e.toLowerCase()}return-1!==e.indexOf("-")?e.toLowerCase():e.replace(/^[A-Z]/,function(e){return e.toLowerCase()}).replace(/^(webkit|moz|ms|o)/i,function(e){return"-"+e}).replace(/[A-Z]/g,n)}function n(){return"undefined"!=typeof TransitionEvent?"transitionend":"undefined"!=typeof WebKitTransitionEvent?"webkitTransitionEnd":void 0}function t(){function e(){Y.removeAttribute("style"),b="complete",K=0,F=void 0}function t(){function e(){I[q]="translateY("+p+"px) rotate("+(k+=14)+"deg)",W=o(e)}I.removeProperty(z),e()}function a(e){return"function"==typeof e&&E.push(e),M}function u(e){return"function"==typeof e&&A.push(e),M}function c(e){return"function"==typeof e&&T.push(e),M}function s(){1===K&&(K=0,b="resolve",setTimeout(function(){r(W),I[z]="all .3s ease-out",I[q]="translateY("+p+"px) rotate("+(720+k)+"deg) scale(0.1)",I.opacity=0,K=2},300))}function f(){1===K&&(K=0,b="reject",setTimeout(function(){r(W),I[z]="all .3s ease-out",I[q]="translateY(0px) rotate("+k+"deg)",I.backgroundColor="rgb(255, 255, 255)",K=3},300))}function d(){return A.length=0,T.length=0,M}var l=2.1,m=110,p=70,v="rgb(66, 133, 244)",h=v.substring(4,v.length-1).split(","),w=parseInt(h[0]),g=parseInt(h[1]),y=parseInt(h[2]),b="complete",E=[],A=[],T=[],x=document.body,Y=document.getElementById("pullRefresh");null===Y&&(Y=document.createElement("div"),Y.id="pullRefresh",x.appendChild(Y));var C,F,L,k,I=Y.style,R=n(),q=i("transform"),z=i("transition"),j={},K=0;window.addEventListener("touchstart",function(e){var n=e.changedTouches,t=e.touches,o=n[0],r=t[0];j[o.identifier]=o.screenY,1===t.length&&(F=r.identifier,C=0===x.scrollTop)},!1),window.addEventListener("touchmove",function(e){var n=e.touches,t=n[0];if(t.identifier===F){var o=t.screenY-j[F],r=o/l,i=Math.min(1,r/p);0===x.scrollTop&&o>=0&&e.preventDefault(),C&&o>=0&&!K&&(L=Math.min(m,r),k=2*o,I[q]="translateY("+L+"px) rotate("+k+"deg)",I.backgroundColor="rgb("+parseInt(255-(255-w)*i)+", "+parseInt(255-(255-g)*i)+", "+parseInt(255-(255-y)*i)+")")}},!1),window.addEventListener("touchend",function(e){var n=e.changedTouches,t=n[0],o=e.touches;if(t.identifier===F||0===o.length){var r=t.screenY-j[F],i=r/l;C&&r>0&&!K&&(i>=p?(K=1,b="pending",I[z]="all .2s ease-in",I[q]="translateY("+(p+.01)+"px) rotate("+k+"deg)"):(K=-1,b="cancel",I[z]="all .3s ease-out",I[q]="translateY(0px) rotate("+k+"deg)",I.backgroundColor="rgb(255, 255, 255)"))}0===o.length&&(j={})},!1),window.addEventListener("touchcancel",function(){"complete"===b&&e()},!1);var W;Y.addEventListener(R,function(n){if(-1===K)e();else if(1===K){t();for(var o=0;o<E.length;o++)E[o]()}else if(2===K){e();for(var r=0;r<A.length;r++)A[r]()}else if(3===K){e();for(var i=0;i<T.length;i++)T[i]()}},!1);var M={on:a,done:u,fail:c,off:d,reject:f,resolve:s};return M}var o=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,r=window.cancelAnimationFrame||window.mozCancelAnimationFrame;window.requestAnimationFrame=o,window.cancelAnimationFrame=r;var i=function(){var n,t=["","-webkit-","-moz-","-ms-","-o-"],o=document.createElement("div"),r=o.style;return function(i){i=e(i);for(var a=0,u=t.length;u>a;a++)if(n="",n=t[a]?t[a]+i:i,n in r)return n;o=null}}();(function(){var e=!1;try{var n=document.createEvent("TouchEvent");n.initEvent("touchstart"),e=!0}catch(t){}return e})(),function(){return!("undefined"==typeof AnimationEvent&&"undefined"==typeof WebKitAnimationEvent)}(),function(){return!("undefined"==typeof TransitionEvent&&"undefined"==typeof WebKitTransitionEvent)}();return t});