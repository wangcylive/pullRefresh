!function(e){"function"==typeof define&&define.amd?define(e):"object"==typeof exports?module.exports=e():window.pullRefresh=e()}(function(){function e(e){function n(e){return"-"+e.toLowerCase()}return-1!==e.indexOf("-")?e.toLowerCase():e.replace(/^[A-Z]/,function(e){return e.toLowerCase()}).replace(/^(webkit|moz|ms|o)/i,function(e){return"-"+e}).replace(/[A-Z]/g,n)}function n(){return"undefined"!=typeof TransitionEvent?"transitionend":"undefined"!=typeof WebKitTransitionEvent?"webkitTransitionEnd":void 0}function t(){function e(){h.removeAttribute("style"),Y=0,m=void 0}function t(e){return"function"==typeof e&&p.push(e),I}function i(){return p.length=0,I}var o=2.1,a=110,u=70,d="rgb(66, 133, 244)",s=d.substring(4,d.length-1).split(","),c=parseInt(s[0]),f=parseInt(s[1]),l=parseInt(s[2]),p=[],v=document.body,h=document.getElementById("pullRefresh");null===h&&(h=document.createElement("div"),h.id="pullRefresh",v.appendChild(h));var g,m,E,y,w=h.style,b=n(),T=r("transform"),x=r("transition"),L={},Y=0;window.addEventListener("touchstart",function(e){var n=e.changedTouches,t=e.touches,r=n[0],i=t[0];L[r.identifier]=r.screenY,1===t.length&&(m=i.identifier,g=0===v.scrollTop)},!1),window.addEventListener("touchmove",function(e){var n=e.touches,t=n[0];if(t.identifier===m){var r=t.screenY-L[m],i=r/o,d=Math.min(1,i/u);0===v.scrollTop&&r>=0&&e.preventDefault(),g&&r>=0&&!Y&&(E=Math.min(a,i),y=2*r,w[T]="translateY("+E+"px) rotate("+y+"deg)",w.backgroundColor="rgb("+parseInt(255-(255-c)*d)+", "+parseInt(255-(255-f)*d)+", "+parseInt(255-(255-l)*d)+")")}},!1),window.addEventListener("touchend",function(e){var n=e.changedTouches,t=n[0],r=e.touches;if(t.identifier===m||0===r.length){var i=t.screenY-L[m],a=i/o;g&&i>0&&!Y&&(a>=u?(Y=1,w[x]="all .2s ease-in",w[T]="translateY("+(u+.01)+"px) rotate("+y+"deg)"):(Y=-1,w[x]="all .3s ease-out",w[T]="translateY(0px) rotate("+y+"deg)",w.backgroundColor="rgb(255, 255, 255)"))}0===r.length&&(L={})},!1),window.addEventListener("touchcancel",function(){0===Y&&e()},!1),h.addEventListener(b,function(){if(-1===Y)e();else if(1===Y)w[x]="all .4s linear",w[T]="translateY("+u+"px) rotate("+(720+y)+"deg)",w.opacity=1,Y=2;else if(2===Y)w[x]="all .3s ease-out",w[T]="translateY("+u+"px) rotate("+(720+y)+"deg) scale(0.1)",w.opacity=0,Y=3;else if(3===Y){e();for(var n=0;n<p.length;n++)p[n]()}},!1);var I={done:t,off:i};return I}var r=function(){var n,t=["","-webkit-","-moz-","-ms-","-o-"],r=document.createElement("div"),i=r.style;return function(o){o=e(o);for(var a=0,u=t.length;u>a;a++)if(n="",n=t[a]?t[a]+o:o,n in i)return n;r=null}}();(function(){var e=!1;try{var n=document.createEvent("TouchEvent");n.initEvent("touchstart"),e=!0}catch(t){}return e})(),function(){return!("undefined"==typeof AnimationEvent&&"undefined"==typeof WebKitAnimationEvent)}(),function(){return!("undefined"==typeof TransitionEvent&&"undefined"==typeof WebKitTransitionEvent)}();return t});